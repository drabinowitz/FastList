!function(t){"use strict";function e(t){this.value=t.value,this.next=t.next||null,this.parent=t.parent||null,this.__key__=t.key}function n(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)});return e}var i=function(){this.head=null,this.tail=null,this.length=0,this.listIndex={}};i.prototype._mustFind=function(t){var e=this.listIndex[t];if(e)return e;throw new Error(t+" does not reference an existing node.  Create a node with this key first using an add method")},i.prototype._mustNotFind=function(t){if(this.listIndex[t])throw new Error(t+" already refers to an existing node.  Use 'set' to update an existing node or make sure to pass in a unique key.")},i.prototype._add=function(t,i){i=i||n();try{this._mustNotFind(i);var r=new e({value:t,key:i});return this.listIndex[i]=r,this.length++,r}catch(a){throw a}},i.prototype._addFirst=function(t,e){if(this.length)throw new Error("List already has elements.  Use add before/after instead");return this.head=this.tail=this._add(t,e),this.head.__key__},i.prototype._placeIn=function(t,e,n){try{var i=this._mustFind(e),r=n?"parent":"next",a=n?"next":"parent";i[r]&&(t[r]=i[r],i[r][a]=t),t[a]=i,i[r]=t,n&&i===this.head?this.head=t:n||i!==this.tail||(this.tail=t)}catch(o){throw o}},i.prototype.addBefore=function(t,e,n){try{var i=this._add(e,n);return this._placeIn(i,t,!0),i.__key__}catch(r){throw r}},i.prototype.addAfter=function(t,e,n){try{var i=this._add(e,n);return this._placeIn(i,t,!1),i.__key__}catch(r){throw r}},i.prototype.addToTail=function(t,e){return this.head?this.addAfter(this.tail.__key__,t,e):this._addFirst(t,e)},i.prototype.addToHead=function(t,e){return this.head?this.addBefore(this.head.__key__,t,e):this._addFirst(t,e)},i.prototype.removeAt=function(t){var e=this.listIndex[t];return e?(e.parent?e.parent.next=e.next:this.head===e&&(this.head=e.next),e.next?e.next.parent=e.parent:this.tail===e&&(this.tail=e.parent),delete this.listIndex[t],this.length--,e.value):void 0},i.prototype.removeFromHead=function(){return this.head?this.removeAt(this.head.__key__):null},i.prototype.removeFromTail=function(){return this.tail?this.removeAt(this.tail.__key__):null},i.prototype.get=function(t){var e=this.listIndex[t];return e?e.value:void 0},i.prototype.set=function(t,e){try{var n=this._mustFind(t);n.value=e}catch(i){throw i}},t.FastList=i}(window);